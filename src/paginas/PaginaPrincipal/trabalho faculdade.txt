//fiz em javascript pois é a linguagem que estou acostumado a fazer e acho mais prático de se realizar


class Produto {
    constructor(codigo, descricao, valorUnitario, quantidadeEstoque) {
        this.codigo = codigo;
        this.descricao = descricao;
        this.valorUnitario = valorUnitario;
        this.quantidadeEstoque = quantidadeEstoque;
    }

    vender(quantidadeVendida) {
        if (quantidadeVendida <= this.quantidadeEstoque) {
            this.quantidadeEstoque -= quantidadeVendida;
            return true;
        } else {
            return false;
        }
    }
}

class Cliente {
    constructor(codigo, nome, endereco, telefone) {
        this.codigo = codigo;
        this.nome = nome;
        this.endereco = endereco;
        this.telefone = telefone;
    }
}

class ItemVenda {
    constructor(produto, quantidade) {
        this.produto = produto;
        this.quantidade = quantidade;
        this.valorTotal = produto.valorUnitario * quantidade;
    }
}

class Venda {
    constructor(codigo, dataVenda, cliente, itensVenda) {
        this.codigo = codigo;
        this.dataVenda = dataVenda;
        this.cliente = cliente;
        this.itensVenda = itensVenda;
    }

    calcularValorTotal() {
        let valorTotal = 0;
        for (const itemVenda of this.itensVenda) {
            valorTotal += itemVenda.valorTotal;
        }
        return valorTotal;
    }
}

class Pagamento {
    constructor(codigo, venda, tipoPagamento, valorPago) {
        this.codigo = codigo;
        this.venda = venda;
        this.tipoPagamento = tipoPagamento;
        this.valorPago = valorPago;
    }

    validarPagamento() {
        if (this.valorPago >= this.venda.calcularValorTotal()) {
            return true;
        } else {
            return false;
        }
    }
}

// Exemplo de uso

const produto1 = new Produto('P1', 'Lápis', 1.50, 100);
const produto2 = new Produto('P2', 'Caderno', 5.00, 50);

const cliente1 = new Cliente('C1', 'João Silva', 'Rua da Paz, 123', '1234-5678');

const venda1 = new Venda('V1', new Date(), cliente1, [
    new ItemVenda(produto1, 2),
    new ItemVenda(produto2, 1),
]);

const pagamento1 = new Pagamento('PG1', venda1, 'dinheiro', 8.50);

console.log(`Venda ${venda1.codigo}:`);
console.log(`  Cliente: ${venda1.cliente.nome}`);
console.log(`  Itens:`);
for (const itemVenda of venda1.itensVenda) {
    console.log(`    - ${itemVenda.produto.descricao} x ${itemVenda.quantidade} (R$ ${itemVenda.valorTotal.toFixed(2)})`);
}
console.log(`  Valor total: R$ ${venda1.calcularValorTotal().toFixed(2)}`);
console.log(`  Pagamento: ${pagamento1.tipoPagamento} (R$ ${pagamento1.valorPago.toFixed(2)})`);

if (pagamento1.validarPagamento()) {
    console.log('Pagamento realizado com sucesso!');
    console.log(`Estoque atualizado:`);
    console.log(`    - ${produto1.descricao}: ${produto1.quantidadeEstoque}`);
    console.log(`    - ${produto2.descricao}: ${produto2.quantidadeEstoque}`);
} else {
    console.log('Valor do pagamento insuficiente!');
}